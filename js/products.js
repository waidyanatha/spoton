//var data = {
//    "products": [
//        {
//            "category": "disaster",
//            "menuname": "DISASTER",
//            "menuindex": 0,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>SAMBRO</font> :: Emergency Communications",
//                "description": "SAMBRO <a href='http://www.sahanafoundation.org/'>Sahana</a> Alerting and Messaging Broker - is a Common Alerting Protocol-enabled Free and Open Source Humanitarian Software designed for Closed User Group and Public Alerting."
//            },
//            "demoTitle": "Click to access the SAMBRO DEMO",
//            "demoURL": "http://www.samanathetha.lk/sahana-demo",
//            "imgTitle": "SAMBRO",
//            "imgURL": "img/prod/sambro.png",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Coordination -</b></i> avoids duplication of effort and supports shared situational-awareness among multiple agencies."
//                },
//                {
//                    "index": 1,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Consistency -</b></i> assured certainty across different sources removing delays in responsiveness and disbelief."
//                },
//                {
//                    "index": 2,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Channels (multiple) -</b></i> messages delivery over a variety of devices, whether at home, sleeping, traveling."
//                },
//                {
//                    "index": 3,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Completeness -</b></i> includes all pertinent details in multiple languages; multimedia for illiterate or hearing/visually impaired."
//                },
//                {
//                    "index": 4,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Coverage -</b></i> messages targeted to those communities at risk to reduce growing complacency."
//                },
//                {
//                    "index": 5,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "<i><b>Control -</b></i> secure messaging with means for authentication to reduce incidents of malicious attempts to issue false alerts."
//                }
//            ]
//        },
//        {
//            "category": "mhealth",
//            "menuname": "DISASTER",
//            "menuindex": 1,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>NEOTRYGON</font> :: Health Data System in support of Ultra-safe Populations",
//                "description": "HEADSUP is a set of ICT components designed to capture medical records at the Point of Care. The mS-cube suit of mobile applications are developed to support Sentinel Site Surveillance activities"
//            },
//            "demoTitle": "Hospital Issues",
//            "demoURL": "complaints.htm",
//            "imgTitle": "HEADSUP",
//            "imgURL": "img/prod/four_tech.jpg",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "first health world"
//                },
//                {
//                    "index": 1,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "second health world"
//                }
//            ]
//        },
//        {
//            "category": "data-mining",
//            "menuname": "DATA MINING",
//            "menuindex": 2,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>PANTHERA</font> :: datamining, predictive, and visual analytics",
//                "description": "An interactive tool for spatial and temporal analysis of large data sets."
//            },
//            "demoTitle": "Click to view the Biosurveillance Poster",
//            "demoURL": "img/prod/rtbp_poster.pdf",
//            "imgTitle": "T-Cube Web Interface",
//            "imgURL": "img/prod/tcube.png",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Comprehensive analyzes prevent missing clues,  help focus attention,  enable effective actions"
//                },
//                {
//                    "index": 1,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "summarize and visualize data to detect and validate unexpected Patterns"
//                },
//                {
//                    "index": 2,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Ability to monitor mutivariate attributes"
//                },
//                {
//                    "index": 3,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Faster detections, better situational awareness, rapid response ability."
//                }
//            ]
//        },
//        {
//            "category": "satellite",
//            "menuname": "SATELLITE",
//            "menuindex": 3,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>STRIX</font> :: Addressable Miniature Satellite Receivers for Location-based Services",
//                "description": "Simultaneously broadcast high-quality video, audio, and text/graphical data directly to Android Tablets, Windows Laptops, Signage Displays, or corporate high volume multicast data solutions"
//            },
//            "demoTitle": "Click to view ASSETT poster",
//            "demoURL": "img/prod/Yazmi_Tablet Poster_Final.pdf",
//            "imgTitle": "Solutions",
//            "imgURL": "img/prod/yazmi.png",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Alerting Solutions with Satellite-enabled Tablets (ASSET)"
//                },
//                {
//                    "index": 1,
//                    "prodURL": "img/prod/strix_signage_solutions.png",            
//                    "desc": "Digital Signage Solutions"
//                }
//            ]
//        },        
//        {
//            "category": "mBank",
//            "menuname": "mBanking",
//            "menuindex": 4,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>HYPNAL</font> :: Mobile POS Payment Gateways",
//                "description": "Dual purpose mobile phones serving daily communications as well as a mobile payment gateway for Point Of Sales (POS) transactions. Ideal for regular service and goods distributors."
//            },
//            "demoTitle": "",
//            "demoURL": "",
//            "imgTitle": "POS",
//            "imgURL": "img/prod/pos.png",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Affordable, less that US$ 100 per unit"
//                },
//                {
//                    "index": 2,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Using standard android mobile phones that are integrated in to the daily lives"
//                }
//            ]
//        },        
//        {
//            "category": "ivr",
//            "menuname": "IVR",
//            "menuindex": 6,
//            "summary": {
//                "title": "<font color='lightgrey'>SPOT - </font><font color='orange'>LITORIA</font> :: <a href='http://www.freedomfone.org'>Freedom Fone</a> two-way Interactive Voice Response (IVR) system",
//                "description": "The voice-enabled technology is serving those falling short in computer literacy and are underserved by non-latin scripting technologies, making them part of the digital habitat."
//            },
//            "demoTitle": "Click to view the Book",
//            "demoURL": "",
//            "imgTitle": "ASSET",
//            "imgURL": "img/prod/ff.png",            
//            "subProd": [
//                {
//                    "index": 0,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Quality -  "
//                },
//                {
//                    "index": 1,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Scalability"
//                },
//                {
//                    "index": 2,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Sustainability - "
//                },
//                {
//                    "index": 3,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Uniformity - "
//                },
//                {
//                    "index": 4,
//                    "prodURL": "img/prod/yazmi.png",            
//                    "desc": "Ubiquity - "
//                }
//            ]
//        }        
//    ]
//}


$.paint = function(x,data){
    $.getJSON('./data/products.json', function(data) {
    var summtitle = "<p><strong>" + data.products[x].summary.title + "</strong></p>";
    var submenudesc = "<p>" + data.products[x].summary.description + "</p>";
    var demo = "<p><a href='" + data.products[x].demoURL + "'>" + data.products[x].demoTitle + "</a></p>";
    var imgTitle = "<h4>" + data.products[x].imgTitle + "</h4>";
    var subProds = "<ul>";
    for (var i in data.products[x].subProd){
        subProds += "<li class='subProd_img' id='subProd_" + x + "_" + i + "'><a href='javascript:void(0);'><p>" + data.products[x].subProd[i].desc + "</p></a></li><br>";
    }
    subProds += "</ul>";
    //select the first sub image when loading
    var solImg = "<img src='" + data.products[x].subProd[0].prodURL + "' />";    
    $("#solImg").html(solImg);


    $("#summtitle").html(summtitle);
    $("#submenudesc").html(submenudesc);
    $("#demo").html(demo);
    $("#subProds").html(subProds);
    });
}


$(function(){
    $(document).ready(function(){
        $.getJSON('./data/products.json', function(data) {
        var id = $.urlParam('id'); 
        if(id==null){
            id = 0;            
        } 
        $('#current_'+id).addClass('current');
        $('#current_'+id).siblings().removeClass('current');
        $.paint(id,data);
        });
    return false;
    });
});

$.urlParam = function(name){
    var results = new RegExp('[\\?&amp;]' + name + '=([^&amp;#]*)').exec(window.location.href);
    //this will add 0 as the id when page loading normally
    var ret = 0;
    if(results!=null){
        ret = results[1];
    }
    return ret || 0;
}


$("#submenu li").click(function(){
    
    $(this).addClass("current");                      
    $(this).siblings().removeClass('current');
    var arr = $(this).attr('id').split("_");
    var id = arr[1];
    $.getJSON('./data/products.json', function(data) {
        $.paint(id,data);
    });
});
                            
$('#subProds ul li').live('click',function(){
    
    var arr = $(this).attr('id').split("_");
    var x = arr[1];
    var y = arr[2];
    $.getJSON('./data/products.json', function(data) {
        var solImg = "<img src='" + data.products[x].subProd[y].prodURL + "' />";    
        $("#solImg").html(solImg);
    });
    return false;
});